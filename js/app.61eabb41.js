(function(){"use strict";var e={6006:function(e,t,a){var n=a(9242),r=a(3396);const i={class:"container"};function l(e,t,a,n,l,o){const s=(0,r.up)("Header"),c=(0,r.up)("Main"),u=(0,r.up)("NotFound");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(s),"error"!=e.getFullWeather?((0,r.wg)(),(0,r.j4)(c,{key:0})):((0,r.wg)(),(0,r.j4)(u,{key:1,lang:e.lang},null,8,["lang"]))])}var o=a(65),s=a.p+"img/logo.af34f1a1.svg",c=a.p+"img/drop.ee4f4542.svg";const u={class:"header"},g={class:"header__nav"},d=(0,r._)("a",{href:"",class:"header__logo"},[(0,r._)("img",{src:s,alt:""}),(0,r._)("span",{class:"header__logo-text"},"vue weather")],-1),_={class:"header__search"},m=(0,r._)("img",{src:c,alt:""},null,-1);function h(e,t,a,i,l,o){return(0,r.wg)(),(0,r.iD)("header",u,[(0,r._)("nav",g,[d,(0,r._)("div",_,[m,(0,r.wy)((0,r._)("input",{type:"text",class:"header__input",placeholder:"Выбрать город","onUpdate:modelValue":t[0]||(t[0]=t=>e.query=t),onKeydown:t[1]||(t[1]=(0,n.D2)((t=>e.getWeather(e.query)),["enter"]))},null,544),[[n.nr,e.query]])])])])}var p=(0,r.aZ)({name:"Header",data(){return{query:""}},methods:{...(0,o.nv)(["getWeather"])}}),y=a(89);const w=(0,y.Z)(p,[["render",h]]);var f=w;const v={class:"main"};function k(e,t,a,n,i,l){const o=(0,r.up)("MainContent"),s=(0,r.up)("Week");return(0,r.wg)(),(0,r.iD)("main",v,[(0,r.Wm)(o),(0,r.Wm)(s)])}var W=a(7139),F=a.p+"img/clear.a17a0e02.svg",D=a.p+"img/small_rain.aba71dd4.svg",b=a.p+"img/rain_sun.d758b9b6.svg",M=a.p+"img/rain.66b03987.svg",z=a.p+"img/clouds.714cdf6c.svg",S=a.p+"img/mainRightBg.ed86aa79.svg",Z=a.p+"img/temperature.5012f3aa.svg",x=a.p+"img/pressure.dec93a4d.svg",$=a.p+"img/osadki.b2bec82d.svg",C=a.p+"img/wind.e3f8caaa.svg",O=a.p+"img/uf-index.e9f618fa.webp";const j={key:0,class:"main__content"},T={class:"main__content-left"},H={class:"main__content-left__degree"},K=(0,r._)("p",{class:"main__content-left__today"},"Сегодня",-1),q={class:"main__content-left__city"},U={class:"main__content-left__img"},L={key:0,src:F,alt:"clear"},N={key:1,src:D,alt:"small-rain"},R={key:2,src:b,alt:"rain-sun"},B={key:3,src:M,alt:"rain"},P={key:4,src:z,alt:"clouds"},V={class:"main__content-right"},A=(0,r._)("img",{src:S,alt:"",class:"main__content-right__bg"},null,-1),E={class:"main__content-right__item"},I=(0,r._)("div",{class:"main__content-right__item-icon"},[(0,r._)("img",{src:Z,alt:""})],-1),Y=(0,r._)("span",null,"Температура",-1),G={class:"item-temp"},J={class:"main__content-right__item"},Q=(0,r._)("div",{class:"main__content-right__item-icon"},[(0,r._)("img",{src:x,alt:""})],-1),X=(0,r._)("span",null,"Давление ",-1),ee={class:"item-temp"},te={class:"main__content-right__item"},ae=(0,r._)("div",{class:"main__content-right__item-icon"},[(0,r._)("img",{src:$,alt:""})],-1),ne=(0,r._)("span",null,"Осадки",-1),re={class:"item-temp"},ie={class:"main__content-right__item"},le=(0,r._)("div",{class:"main__content-right__item-icon"},[(0,r._)("img",{src:C,alt:""})],-1),oe=(0,r._)("span",null,"Ветер",-1),se={class:"item-temp"},ce={class:"main__content-right__item"},ue=(0,r._)("div",{class:"main__content-right__item-icon"},[(0,r._)("img",{src:O,alt:""})],-1),ge=(0,r._)("span",null,"Уф-индекс",-1),de={class:"item-temp"},_e={key:1,class:"wait__content"},me=(0,r._)("h1",null,"Загрузка...",-1),he=[me];function pe(e,t,a,n,i,l){return e.getFullWeather?((0,r.wg)(),(0,r.iD)("div",j,[(0,r._)("div",T,[(0,r._)("p",H,(0,W.zw)(e.getFullWeather?Math.round(e.getFullWeather.current.temp):"...")+"° ",1),K,(0,r._)("p",{class:"main__content-left__time",onLoad:t[0]||(t[0]=t=>0==e.difference)},"Время: "+(0,W.zw)(e.getFullWeather.foreignTime?e.getFullWeather.foreignTime+`\n                (${e.difference} м назад)`:".. : .."),33),(0,r._)("p",q,"Город: "+(0,W.zw)(e.getFullWeather.cityName),1),(0,r._)("div",U,["ясно"==e.description?((0,r.wg)(),(0,r.iD)("img",L)):"небольшой дождь"==e.description?((0,r.wg)(),(0,r.iD)("img",N)):"небольшой дождь и солнце"==e.description?((0,r.wg)(),(0,r.iD)("img",R)):"дождь"==e.description?((0,r.wg)(),(0,r.iD)("img",B)):(e.description,(0,r.wg)(),(0,r.iD)("img",P))])]),(0,r._)("div",V,[A,(0,r._)("div",E,[I,Y,(0,r._)("span",G,(0,W.zw)(e.getFullWeather?e.getFullWeather.current.temp.toFixed(1):"...")+"° - ощущается как "+(0,W.zw)(e.getFullWeather?e.getFullWeather.current.feels_like.toFixed(1):"...")+"°",1)]),(0,r._)("div",J,[Q,X,(0,r._)("span",ee,(0,W.zw)(e.getFullWeather?e.getFullWeather.current.pressure_mmHg.toFixed(1):"...")+" мм ртутного столба - "+(0,W.zw)(e.getFullWeather.current.pressure_power),1)]),(0,r._)("div",te,[ae,ne,(0,r._)("span",re,(0,W.zw)(e.getFullWeather.current.humidity)+"%",1)]),(0,r._)("div",ie,[le,oe,(0,r._)("span",se,(0,W.zw)(e.getFullWeather.current.wind_speed.toFixed(1))+" м/с "+(0,W.zw)(e.getFullWeather.current.wind_direction)+" - "+(0,W.zw)(e.getFullWeather.current.wind_power)+" ветер",1)]),(0,r._)("div",ce,[ue,ge,(0,r._)("span",de,(0,W.zw)(e.getFullWeather.current.uvi.toFixed(1))+" - "+(0,W.zw)(e.getFullWeather.current.uvi_power),1)])])])):((0,r.wg)(),(0,r.iD)("div",_e,he))}var ye=(0,r.aZ)({name:"MainContent",data(){return{data:null,difference:0}},computed:{...(0,o.Se)(["getFullWeather"]),description(){const e=this.$store.getters.getFullWeather.current.weather[0].description;return`${e.toLowerCase()}`}},mounted(){setInterval((()=>{try{this.difference=new Date(Math.abs(+new Date(this.getFullWeather.date_local)-+new Date)).getMinutes()}catch(e){this.difference=0}}),1e3)}});const we=(0,y.Z)(ye,[["render",pe]]);var fe=we;const ve={key:0,class:"main__week"},ke={class:"main__week-btns"};function We(e,t,a,n,i,l){const o=(0,r.up)("Day");return e.getDailyWeather?((0,r.wg)(),(0,r.iD)("div",ve,[(0,r._)("div",ke,[(0,r._)("button",{class:"btn",onClick:t[0]||(t[0]=t=>e.change=!e.change)},"На неделю"),(0,r._)("button",{class:"btn",onClick:t[1]||(t[1]=t=>e.getWeather("Ташкент"))},"Отменить")]),(0,r._)("div",{class:(0,W.C_)(["main__week-days",{active:e.change}])},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.getDailyWeather,((e,t)=>((0,r.wg)(),(0,r.j4)(o,{key:t,day:e,i:t},null,8,["day","i"])))),128))],2)])):(0,r.kq)("",!0)}const Fe={key:0,class:"main__week-day day"},De={class:"main__week-title day-title"},be={class:"main__week-date day-date"},Me={class:"main__week-img day-img"},ze={key:0,src:F,alt:"clear"},Se={key:1,src:D,alt:"small-rain"},Ze={key:2,src:b,alt:"rain-sun"},xe={key:3,src:M,alt:"rain"},$e={key:4,src:z,alt:"clouds"},Ce={class:"main__week-temp day-temp"},Oe={class:"main__week-fells day-fells"},je={class:"main__week-desc day-desc"};function Te(e,t,a,n,i,l){return e.day?((0,r.wg)(),(0,r.iD)("div",Fe,[(0,r._)("h3",De,(0,W.zw)(0==e.i?"Сегодня":1==e.i?"Завтра":e.getWeek),1),(0,r._)("p",be,(0,W.zw)(e.getDay)+" "+(0,W.zw)(e.getMonth),1),(0,r._)("div",Me,["ясно"==e.day.weather[0].description?((0,r.wg)(),(0,r.iD)("img",ze)):"небольшой дождь"==e.day.weather[0].description?((0,r.wg)(),(0,r.iD)("img",Se)):"небольшой дождь и солнце"==e.day.weather[0].description?((0,r.wg)(),(0,r.iD)("img",Ze)):"дождь"==e.day.weather[0].description?((0,r.wg)(),(0,r.iD)("img",xe)):(e.day.weather[0].description,(0,r.wg)(),(0,r.iD)("img",$e))]),(0,r._)("p",Ce,(0,W.zw)(e.day.temp.day>0?"+"+Math.round(e.day.temp.day):Math.round(e.day.temp.day))+"° : "+(0,W.zw)(e.day.temp.night>0?"+"+Math.round(e.day.temp.night):Math.round(e.day.temp.night))+"°",1),(0,r._)("p",Oe,(0,W.zw)(e.day.feels_like.day>0?"+"+Math.round(e.day.feels_like.day):Math.round(e.day.feels_like.day))+"° : "+(0,W.zw)(e.day.feels_like.night>0?"+"+Math.round(e.day.feels_like.night):Math.round(e.day.feels_like.night))+"°",1),(0,r._)("p",je,(0,W.zw)(e.day.weather[0].description),1)])):(0,r.kq)("",!0)}function He(e,t){const a=1e3*e,n=new Date(a),r="weekday"==t?n.toLocaleString("ru-RU",{weekday:"long"}):"month"==t?n.toLocaleString("ru-RU",{month:"long"}):"day"==t?n.toLocaleString("ru-RU",{day:"numeric"}):"";return r}var Ke=He,qe=(0,r.aZ)({name:"Day",props:{day:Object,i:Number},computed:{getWeek(){return Ke(this.day.dt,"weekday")},getMonth(){return Ke(this.day.dt,"month")},getDay(){return Ke(this.day.dt,"day")}}});const Ue=(0,y.Z)(qe,[["render",Te]]);var Le=Ue,Ne=(0,r.aZ)({name:"Week",data(){return{change:!1}},components:{Day:Le},methods:{...(0,o.nv)(["getWeather"]),checkDate(){console.log(this.getDailyWeather)}},computed:{...(0,o.Se)(["getDailyWeather"])}});const Re=(0,y.Z)(Ne,[["render",We]]);var Be=Re,Pe=(0,r.aZ)({name:"Main",components:{MainContent:fe,Week:Be}});const Ve=(0,y.Z)(Pe,[["render",k]]);var Ae=Ve;const Ee={class:"notFoundBlock"},Ie=(0,r._)("h1",null,"404",-1);function Ye(e,t,a,n,i,l){return(0,r.wg)(),(0,r.iD)("div",Ee,[Ie,(0,r._)("p",null,(0,W.zw)(e.message),1)])}var Ge=(0,r.aZ)({name:"notFound",data(){return{msg:["404 - ошибка данных, город/страна не найдена или проверьте интернет","404 - data error, city/country not found or check internet"]}},props:["lang"],computed:{message(){return"en"==this.lang?this.msg[1]:this.msg[0]}}});const Je=(0,y.Z)(Ge,[["render",Ye]]);var Qe=Je,Xe=(0,r.aZ)({name:"App",components:{Header:f,Main:Ae,NotFound:Qe},data(){return{lang:["ru","en"],country:"Tashkent"}},methods:{...(0,o.nv)(["getWeather"])},computed:{...(0,o.Se)(["getFullWeather"])},created(){localStorage.lang=this.lang[0],this.lang=localStorage.lang,localStorage.mtr?localStorage.mtr:localStorage.mtr=this.country,this.getWeather(localStorage.mtr)}});const et=(0,y.Z)(Xe,[["render",l]]);var tt=et,at=a(4161);const nt=(0,o.MT)({state:{apiKeyWheather:"8a2ecd9340b86edf2d9344b98cd07696",apiKeyTime:"LVDM24763CKU",getFullWeather:null},getters:{getFullWeather:e=>e.getFullWeather,getDailyWeather(e){let t=e.getFullWeather?e.getFullWeather["daily"]:[null];return t.pop(),t}},mutations:{getWeather(e,t){e.getFullWeather=t}},actions:{async getWeather({commit:e,state:t},a){try{const n=await at.Z.get(`http://api.openweathermap.org/geo/1.0/direct?q=${a}&appid=${t.apiKeyWheather}`),r=await n.data[0],{lat:i,lon:l}=r,o=r.local_names[localStorage.lang];localStorage.mtr=o;const s=await at.Z.get(`https://api.openweathermap.org/data/2.8/onecall?lat=${i}&lon=${l}&exclude=minutely,hourly&units=metric&lang=${localStorage.lang}&appid=${t.apiKeyWheather}`),c=s.data,u=c.current.pressure,g=.75006375541921*u,d=740>=g?"низкое!":740<g&&g<=750?"пониженное":750<g&&g<=770?"нормальное":770<g&&g<=780?"повышенное":"высокое!",_=c.current.wind_deg,m=0<=_&&_<22.5?"север":22.5<=_&&_<67.5?"северо-восток":67.5<=_&&_<112.5?"восток":112.5<=_&&_<157.5?"юго-восток":157.5<=_&&_<202.5?"юг":202.5<=_&&_<247.5?"юго-запад":247.5<=_&&_<292.5?"запад":292.5<=_&&_<337.5?"северо-запад":"север",h=c.current.wind_speed,p=h<.2?"штиль":.3<=h&&h<1.6?"очень лёгкий":1.6<=h&&h<3.4?"лёгкий":3.4<=h&&h<5.5?"слабый":5.5<=h&&h<8?"умеренный":8<=h&&h<10.8?"свежий":10.8<=h&&h<13.9?"сильный":13.9<=h&&h<17.2?"крепкий":17.2<=h&&h<20.8?"очень крепкий":20.8<=h&&h<24.5?"шторм":24.5<=h&&h<28.5?"сильный шторм":28.5<=h&&h<32.7?"жестокий шторм":"ураган",y=c.current.uvi,w=y<3?"низкий":3<=y&&y<6?"умеренный":6<=y&&y<8?"высокий":8<=y&&y<11?"очень высокий":"чрезмерный";c.current={...c.current,pressure_mmHg:g,pressure_power:d,wind_direction:m,wind_power:p,uvi_power:w};const f=await at.Z.get(`http://api.timezonedb.com/v2.1/get-time-zone?key=${t.apiKeyTime}&format=json&by=position&lat=${i}&lng=${l}`),v=new Date(f.data.formatted),k=v.getHours()<10?`0${v.getHours()}`:v.getHours(),W=v.getMinutes()<10?`0${v.getMinutes()}`:v.getMinutes(),F=k+":"+W,D=(new Date).toUTCString(),b=v.toUTCString(),M={...c,cityName:o,foreignTime:F,date_local:D,date_foreign:b};console.log(M),e("getWeather",M)}catch(n){console.log(n),e("getWeather","error")}}},modules:{}}),rt=(0,n.ri)(tt);rt.use(nt),rt.mount("#app")}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,n,r,i){if(!n){var l=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],i=e[u][2];for(var o=!0,s=0;s<n.length;s++)(!1&i||l>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(o=!1,i<l&&(l=i));if(o){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,r,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.p=""}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,i,l=n[0],o=n[1],s=n[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(s)var u=s(a)}for(t&&t(n);c<l.length;c++)i=l[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},n=self["webpackChunkweather"]=self["webpackChunkweather"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(6006)}));n=a.O(n)})();
//# sourceMappingURL=app.61eabb41.js.map